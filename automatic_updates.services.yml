services:
  automatic_updates.readiness_validation_manager:
    class: Drupal\automatic_updates\Validation\ReadinessValidationManager
    arguments: ['@keyvalue.expirable', '@datetime.time', 24]
  automatic_updates.updater:
    class: Drupal\automatic_updates\Updater
    arguments: ['@state', '@string_translation','@package_manager.beginner', '@package_manager.stager', '@automatic_updates.cleaner', '@package_manager.committer', '@event_dispatcher', '@automatic_updates.path_locator']
  automatic_updates.cleaner:
    class: Drupal\automatic_updates\ComposerStager\Cleaner
    decorates: package_manager.cleaner
    public: false
    arguments:
      - '@automatic_updates.cleaner.inner'
      - '%site.path%'
      - '@automatic_updates.path_locator'
    properties: { _serviceId: package_manager.cleaner }
  automatic_updates.excluded_paths_subscriber:
    class: Drupal\automatic_updates\Event\ExcludedPathsSubscriber
    arguments: ['%app.root%', '%site.path%', '@file_system', '@stream_wrapper_manager']
    tags:
      - { name: event_subscriber }
  automatic_updates.staged_projects_validator:
    class: Drupal\automatic_updates\Validator\StagedProjectsValidator
    arguments: ['@string_translation', '@automatic_updates.path_locator']
    tags:
      - { name: event_subscriber }
  automatic_updates.update_version_validator:
    class: Drupal\automatic_updates\Validator\UpdateVersionValidator
    arguments: ['@automatic_updates.updater']
    tags:
      - { name: event_subscriber }
  automatic_updates.composer_executable_validator:
    class: Drupal\automatic_updates\Validator\ComposerExecutableValidator
    arguments: ['@package_manager.composer_runner']
    tags:
      - { name: event_subscriber }
  automatic_updates.path_locator:
    class: Drupal\automatic_updates\PathLocator
    arguments:
      - '@config.factory'
      - '%app.root%'
